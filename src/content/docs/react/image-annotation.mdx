---
title: React Image Annotation
description: Using Annotorious to annotate images in React.
---
import { Steps } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';

Add an annotation layer to an image using the Annotorious React components. 

```tsx
import { Annotorious, ImageAnnotator } from '@annotorious/react';

import '@annotorious/react/annotorious-react.css';

export default function App() {
  return (
    <Annotorious>
      <ImageAnnotator>
        <img src="example.jpg" />
      </ImageAnnotator>
    </Annotorious>
  );
}
```

## Step-by-Step Guide

<Steps>
1. Import the `Annotorious` and `ImageAnnotator` components.

   ```ts
   import { Annotorious, ImageAnnotator } from '@annotorious/react';
   ```

2. Import Annotorious base CSS styles.

   ```ts
   import '@annotorious/react/annotorious-react.css';
   ```

3. __Important:__ wrap your application with the `<Annotatorious>` root context tag -
   other Annotorious components depend on it. You can use Annotorious-provided hooks 
   anywhere below the context tag.

   <Tabs>
     <TabItem label="App.tsx">
       ```tsx
       export default function App() {
         return (
           <Annotorious>
             <MyAnnotatableImage />
           </Annotorious>
         );
       }
       ```
     </TabItem>
     
     <TabItem label="MyAnnotatableImage.tsx">
       ```tsx
       export const MyAnnotatableImage = () => {

         // You can use Annotorious hooks here!
         const annotations = useAnnotations();

         // ...

         return (
           <ImageAnnotator>
             <img src="example.jpg" />
           </ImageAnnotator>
         );
       }
       ```
     </TabItem>
   </Tabs>
</Steps>

## Annotation Styling

You can apply custom styling to annotations via the `style` prop. The style can 
be:
- a [DrawingStyle](/api-referece/drawing-style) object
- a function that receives the [ImageAnnotation](/api-reference/image-annotation) and
  the [AnnotationState](/api-reference/annotation-state) as an input, and returns
  a [DrawingStyle](/api-referece/drawing-style).

```tsx
const style = (annotation: ImageAnnotation, state: AnnotationState) => ({
  fill: state.hovered ? '#ff0000' : '#ffffff',
  fillOpacity: 0.25
});

<ImageAnnotator style={style}>
  <img src="example.jpg" />
</ImageAnnotator>
```

## Annotation Filter

Using a filter, you can dynamically control the visibility of specific annotations,
based on their data or external criteria. The filter is a function that receives 
the [ImageAnnotation](/api-reference/image-annotation) as an input, and returns a boolean. 
`true` makes the annotation visible, `false` hides it.

```tsx
const showImportantFilter = (annotation: Annotation) => {
  // Show only if the annotation has an 'important' tag
  return annotation.bodies.some(b => b.purpose === 'tagging' && b.value === 'important');
};

<ImageAnnotator filter={showImportantFilter}>
  <img src="example.jpg" />
</ImageAnnotator>;
```

#### FormatAdapter

The `adapter` prop is an optional object that introduces crosswalk functionality between Annotorious' internal annotation data model and different standards. This allows seamless integration of external annotation standards, such as the [W3C Web Annotation standard](https://www.w3.org/TR/annotation-model/), into Annotorious. The adapter will handle the process of parsing and serializing annotations between Annotorious' internal format and the chosen external standard for you. 

When using a format adapter, it impacts all methods of the vanilla `anno` Annotator instance. Currently, the W3C adapter is only available adapter for Annotorious.

```tsx
import { Annotorious, ImageAnnotator, W3CImageFormat } from '@annotorious/react';

<Annotorious>
  <ImageAnnotator adapter={W3CImageFormat()}>
    <img src="example.jpg" />
  </ImageAnnotator>
</Annotorious>

```



#### UserSelectAction

The `userSelectAction` prop controls the behavior when a user clicks or taps on an annotation. Valid values for userSelectAction are `EDIT`, `SELECT`, and `NONE`.

- __EDIT__ makes the annotation editable, allowing the users to modify its shape.

- __SELECT__ ensures that clicking an annotation will trigger the relevant selection lifecycle events of the API. However, the annotation will not become editable.

- __NONE__ renders the annotation inert. Clicking on it will have no effect.

You can directly assign one of these values to userSelectAction. For example:

```tsx
import { UserSelectAction } from '@annotorious/react'; 

<ImageAnnotator userSelectAction={UserSelectAction.EDIT}>
  <img src="example.jpg" />
</ImageAnnotator>
```

Alternatively, you can use a function that dynamically determines the `userSelectAction`` based on annotation properties or other conditions:

```tsx
const dynamicSelectAction = (annotation: Annotation) => {
  const isMine = annotation.target.creator.id == 'me';
  return isMine ? UserSelectAction.EDIT : UserSelectAction.SELECT;
};

<ImageAnnotator userSelectAction={dynamicSelectAction}>
  <img src="example.jpg" />
</ImageAnnotator>
```

__Note:__

For TypeScript users, the valid values for `userSelectAction` are provided as enums for type safety. However, in plain JavaScript, you can use the string values ('EDIT', 'SELECT', 'NONE') directly.

```ts 
// TypeScript
const action: UserSelectAction = UserSelectAction.EDIT;

// JavaScript
const action = 'EDIT';
```

